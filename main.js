!function(){var t=Object.create(HTMLElement.prototype),e=document.implementation.createHTMLDocument("");e.body.innerHTML=['<textarea cols="50" rows="14"></textarea>'].join(""),t.createdCallback=function(){var t=this.root=document.createElement("div");t.className="brick-select-proxy-root",t.appendChild(e.body.firstChild.cloneNode(!0)),this.hasAttribute("storage")&&(this.storage=document.getElementById(this.getAttribute("storage")))},t.attachedCallback=function(){var t=this;this.appendChild(this.root),setTimeout(function(){t.dump()},.1)},t.detachedCallback=function(){this.root.parentNode.removeChild(this.root)},t.log=function(t){var e=this.querySelector("textarea");e&&(e.value=e.value+Date.now()+": "+t+"\n",e.scrollTop=9999)},t.clear=function(){var t=this;t.log("Clearing db records..."),t.storage.clear().then(function(){t.log("Done clearing db records")}).catch(function(e){t.log("ERR CLEARING "+e)})},t.dump=function(){var t=this;t.log("Dumping db records..."),t.storage.getMany().then(function(e){e.forEach(function(e){t.log(JSON.stringify(e))}),t.log("Done dumping db records")})},["alpha","beta","gamma"].forEach(function(e){t["set_"+e]=function(){var t=this,o={_id:e,note:"Updated at "+Date.now()};t.storage.set(o).then(function(e){t.log("Set "+e+" = "+JSON.stringify(o))}).catch(function(e){t.log("ERR SET "+e.name)})}}),document.registerElement("busybox-storage-demo",{prototype:t})}();