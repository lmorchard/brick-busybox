!function(){var t=Object.create(HTMLElement.prototype),e=document.implementation.createHTMLDocument("");e.body.innerHTML=['<textarea cols="50" rows="14"></textarea>'].join(""),t.createdCallback=function(){var t=this,o=this.root=document.createElement("div");o.className="brick-select-proxy-root",o.appendChild(e.body.firstChild.cloneNode(!0)),this.hasAttribute("storage")&&(this.storage=document.getElementById(this.getAttribute("storage"))),this.hasAttribute("item-menu")&&(this.menu=document.getElementById(this.getAttribute("item-menu"))),this.hasAttribute("edit-form")&&(this.editForm=document.getElementById(this.getAttribute("edit-form")),this.editForm.addEventListener("submit",function(){t.editForm.className="",t.log("Saving form..."),t.dump()}))},t.attachedCallback=function(){var t=this;this.appendChild(this.root),setTimeout(function(){t.dump()},.1)},t.detachedCallback=function(){this.root.parentNode.removeChild(this.root)},t.log=function(t){var e=this.querySelector("textarea");e&&(e.value=e.value+Date.now()+": "+t+"\n",e.scrollTop=9999)},t.clear=function(){var t=this;t.log("Clearing db records..."),t.storage.clear().then(function(){t.log("Done clearing db records")}).catch(function(e){t.log("ERR CLEARING "+e)})},t.dump=function(){var t=this;t.log("Dumping db records..."),t.storage.getMany().then(function(e){e.forEach(function(e){t.log(JSON.stringify(e))}),t.log("Done dumping db records")})},t.setData=function(){var t=this;this.menu.show(function(e){var o={_id:e.innerHTML,note:"Updated at "+Date.now()};t.storage.set(o).then(function(e){t.log("Set "+e+" = "+JSON.stringify(o)),t.dump()}).catch(function(e){t.log("ERR SET "+e.name)})})},t.editData=function(){var t=this;this.menu.show(function(e){var o=e.innerHTML;t.editForm.setAttribute("name",o),t.editForm.querySelector('label[for="note"]').innerHTML=o+":",t.editForm.className="shown"})},document.registerElement("busybox-storage-demo",{prototype:t})}();